<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Laboratorio Cognitivo - Psic. Andr√©s Tello</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; color: #333; margin: 0; text-align: center; }
        header { background-color: #2c3e50; color: white; padding: 15px; }
        .container { max-width: 800px; margin: 0 auto; padding: 10px; }
        
        /* Estilos del Test SDMT */
        #sdmt-area { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: none; }
        
        /* La Clave (Arriba) */
        .key-table { display: flex; justify-content: center; gap: 5px; margin-bottom: 20px; overflow-x: auto; }
        .key-item { border: 1px solid #333; padding: 5px; border-radius: 5px; width: 30px; }
        .key-symbol { font-size: 20px; display: block; }
        .key-num { font-weight: bold; border-top: 1px solid #ccc; display: block; }

        /* El Est√≠mulo (Centro) */
        .stimulus-box { font-size: 60px; margin: 20px 0; height: 70px; }
        
        /* Teclado Num√©rico */
        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 300px; margin: 0 auto; }
        .num-btn { 
            background-color: #3498db; color: white; border: none; 
            padding: 15px; font-size: 24px; border-radius: 10px; cursor: pointer; 
            touch-action: manipulation; /* Mejora respuesta t√°ctil */
        }
        .num-btn:active { background-color: #1abc9c; transform: scale(0.95); }

        /* Timer y Puntaje */
        .stats-bar { display: flex; justify-content: space-between; font-weight: bold; font-size: 18px; margin-bottom: 10px; color: #555; }
        
        .btn-start { background-color: #27ae60; color: white; font-size: 20px; padding: 15px 40px; border: none; border-radius: 30px; cursor: pointer; margin-top: 20px; }
        .result-box { display: none; background: #d4edda; color: #155724; padding: 20px; border-radius: 10px; margin-top: 20px; }
    </style>
</head>
<body>

    <header>
        <h3>üß† Laboratorio Neurocognitivo</h3>
        <a href="index.html" style="color: white; text-decoration: none;">‚¨Ö Volver al Consultorio</a>
    </header>

    <div class="container">
        
        <div id="intro-screen">
            <h2>Test de Velocidad de Procesamiento (SDMT)</h2>
            <p><strong>Instrucciones:</strong> Tienes 90 segundos.</p>
            <p>Arriba ver√°s una clave (S√≠mbolo = N√∫mero). En el centro aparecer√° un s√≠mbolo, debes pulsar el n√∫mero correcto lo m√°s r√°pido posible.</p>
            <button class="btn-start" onclick="startSDMT()">‚è±Ô∏è COMENZAR TEST</button>
        </div>

        <div id="sdmt-area">
            <div class="stats-bar">
                <span id="timer">Tiempo: 90s</span>
                <span id="score">Aciertos: 0</span>
            </div>

            <div class="key-table" id="key-display">
                </div>

            <hr>
            <p>Selecciona el n√∫mero para este s√≠mbolo:</p>
            
            <div id="current-symbol" class="stimulus-box">‚ùì</div>

            <div class="numpad">
                <button class="num-btn" onclick="checkAnswer(1)">1</button>
                <button class="num-btn" onclick="checkAnswer(2)">2</button>
                <button class="num-btn" onclick="checkAnswer(3)">3</button>
                <button class="num-btn" onclick="checkAnswer(4)">4</button>
                <button class="num-btn" onclick="checkAnswer(5)">5</button>
                <button class="num-btn" onclick="checkAnswer(6)">6</button>
                <button class="num-btn" onclick="checkAnswer(7)">7</button>
                <button class="num-btn" onclick="checkAnswer(8)">8</button>
                <button class="num-btn" onclick="checkAnswer(9)">9</button>
            </div>
        </div>

        <div id="result-screen" class="result-box"></div>

    </div>

    <script>
        // CONFIGURACI√ìN
        const symbols = ['‚öõÔ∏è', '‚òÆÔ∏è', '‚òØÔ∏è', '‚ò£Ô∏è', '‚ò¢Ô∏è', '‚ò∏Ô∏è', '‚öúÔ∏è', 'üî±', 'üìõ'];
        const duration = 90; 
        
        let timeLeft = duration;
        let score = 0;
        let errors = 0;
        let currentTargetValue = 0;
        let timerInterval;
        let gameActive = false;

        function startSDMT() {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('sdmt-area').style.display = 'block';
            setupKey();
            nextRound();
            gameActive = true;
            timerInterval = setInterval(updateTimer, 1000);
        }

        function setupKey() {
            const keyContainer = document.getElementById('key-display');
            keyContainer.innerHTML = '';
            symbols.forEach((sym, index) => {
                let num = index + 1;
                keyContainer.innerHTML += `<div class="key-item"><span class="key-symbol">${sym}</span><span class="key-num">${num}</span></div>`;
            });
        }

        function nextRound() {
            if(!gameActive) return;
            let randIndex = Math.floor(Math.random() * 9);
            currentTargetValue = randIndex + 1;
            document.getElementById('current-symbol').innerText = symbols[randIndex];
        }

        function checkAnswer(num) {
            if(!gameActive) return;
            if(num === currentTargetValue) { score++; } else { errors++; }
            document.getElementById('score').innerText = `Aciertos: ${score}`;
            nextRound();
        }

        function updateTimer() {
            timeLeft--;
            document.getElementById('timer').innerText = `Tiempo: ${timeLeft}s`;
            if(timeLeft <= 0) endGame();
        }

        function endGame() {
            clearInterval(timerInterval);
            gameActive = false;
            document.getElementById('sdmt-area').style.display = 'none';
            const resultBox = document.getElementById('result-screen');
            
            let msg = "";
            if(score < 30) msg = "Velocidad baja. Posible afectaci√≥n atencional.";
            else if(score < 50) msg = "Velocidad promedio-baja.";
            else if(score < 70) msg = "Velocidad Normal (Promedio).";
            else msg = "Velocidad de procesamiento Superior.";

            const whatsappMsg = `Hola Psic. Andr√©s. Realic√© el test SDMT (Velocidad). Aciertos: ${score}. Errores: ${errors}. (${msg})`;

            resultBox.innerHTML = `<h2>üìä Resultados</h2><p style="font-size: 24px;"><strong>${score}</strong> aciertos</p><p>Errores: ${errors}</p><p><em>${msg}</em></p><br><a href="https://wa.me/19086361137?text=${encodeURIComponent(whatsappMsg)}" class="btn-start" style="background:#25D366; text-decoration:none; display:block;">üì≤ Enviar a mi Psic√≥logo</a><br><button onclick="location.reload()" style="background:none; border:none; color:#555; cursor:pointer;">üîÑ Intentar de nuevo</button>`;
            resultBox.style.display = 'block';
        }
    </script>
</body>
</html>